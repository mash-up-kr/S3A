# 1ì¥ ì¹´í”„ì¹´ ê°œìš”

### 1.1  ì˜ë€ë„ì™€ íŠ¸ìœ„í„°ì˜ ì¹´í”„ì¹´ ë„ì… ì‚¬ë¡€

ì˜ë€ë„ëŠ”  ğŸ›ï¸ì˜¨ë¼ì¸ ì‡¼í•‘ëª°ì´ë©° ë¬´ì‹ ì‚¬ì™€ ìœ ì‚¬. êµ­ë‚´ì—ì„œ ë¬´ì‹ ì‚¬ê°€ ìˆë‹¤ë©´ ìœ ëŸ½ì—ëŠ” ì˜ë€ë„

ì‹ ë¢°ì„±ì´ ìˆëŠ” ë°ì´í„°ê°€ ë˜ê¸° ìœ„í•´ì„  ì¸ë°”ìš´ë“œ ë°ì´í„°ì™€ ì•„ì›ƒë°”ìš´ë“œ ë°ì´í„°ê°€ âœ”ï¸ì¼ì¹˜í•´ì•¼í•œë‹¤.

### ê³¼ê±°ì—ëŠ”..
ì´ˆê¸°ì—ëŠ” APIì™€ DBë¡œ ì—°ê²°í•˜ëŠ” CRUDë¡œ êµ¬ì„±í•˜ì—¬ DB ì—…ë°ì´íŠ¸ê°€ ëœ í›„ ì•„ì›ƒë°”ìš´ë“œ ì´ë²¤íŠ¸ê°€ ìƒì„± ğŸ”„

### ë™ê¸°í™”ë¬¸ì œ
1. ì—¬ëŸ¬ ë„¤íŠ¸ì›Œí¬ë¥¼ ì´ìš©í•˜ëŠ” í™˜ê²½ì—ì„œ ëª¨ë“  ë°ì´í„° ë³€ê²½ì— ëŒ€í•œ ì˜¬ë°”ë¥¸ ì „ë‹¬ ë³´ì¥ ë¬¸ì œ
2. ë™ì¼í•œ DBë¥¼ ë™ì‹œì— ìˆ˜ì •í•˜ë©´ì„œ ìˆœì„œë¥¼ ë³´ì¥í•´ì•¼í•˜ëŠ” ë¬¸ì œ, ìˆ˜ì •ëœ ì´ë²¤íŠ¸ë“¤ì„ ìˆœì„œëŒ€ë¡œ ì•„ì›ƒë°”ìš´ë“œ ì „ì†¡í•˜ëŠ” ë¬¸ì œ
3. Clientì˜ ë‹¤ì–‘í•œ ìš”êµ¬ì‚¬í•­ì„ íš¨ìœ¨ì ìœ¼ë¡œ ì§€ì›í•˜ê¸° ì–´ë ¤ìš´ ë¬¸ì œ
4. ë¹ ë¥¸ ì „ì†¡ì„ ìœ„í•œ Client ë˜ëŠ” ëŒ€ëŸ‰ì˜ ë°°ì¹˜ ì „ì†¡ì„ ìœ„í•œ í´ë¼ì´ì–¸íŠ¸ë¥¼ ì§€ì›í•˜ê¸° ì–´ë ¤ìš´ ë¬¸ì œ

- ë™ê¸° ë°©ì‹ì˜ í•œê³„ -> ë¹„ë™ê¸° ë°©ì‹ì¸ ì¹´í”„ì¹´ ë„ì…

### ì˜ë€ë„ê°€ ì¹´í”„ì¹´ë¥¼ ë„ì…í•œ ì´ìœ 
1. ë†’ì€ ì²˜ë¦¬ëŸ‰ ğŸ“ˆ
2. ìˆœì„œ ë³´ì¥ ğŸ”¢
3. ì ì–´ë„ í•œ ë²ˆ ì „ì†¡ ë°©ì‹ (at least once)
4. ê°•ë ¥í•œ íŒŒí‹°ì…”ë‹ ğŸ§±
5. ìì—°ìŠ¤ëŸ¬ìš´ ë°±í”„ë ˆì…” í•¸ë“¤ë§
6. ë¡œê·¸ ì»´íŒ¬ì…˜ ğŸ“š
7. ETC..

### ì ì–´ë„ í•œ ë²ˆ(at least once) ì „ì†¡ ë°©ì‹ 
ë¶„ì‚°ëœ ë„¤íŠ¸ì›Œí¬ í™˜ê²½ì—ì„œ ë©±ë“±ì„±ì€ ë§¤ìš° ì¤‘ìš”í•¨ ğŸ”
~~~
ë©±ë“±ì„±(dempotent)ì´ë€?
ë™ì¼í•œ ì‘ì—…ì„ ì—¬ëŸ¬ ë²ˆ ìˆ˜í–‰í•´ë„ ê²°ê³¼ê°€ ë‹¬ë¼ì§€ì§€ ì•ŠëŠ” ê²ƒì„ ì˜ë¯¸ (5.3 ì ˆì—ì„œ ìì„¸íˆ ë‹¤ë£¸)
~~~
ì ì–´ë„ í•œ ë²ˆ ì „ì†¡ë°©ì‹ë§Œ ì‚¬ìš©í•˜ë”ë¼ë„ ê°„í˜¹ ì´ë²¤íŠ¸ë“¤ì´ ì¤‘ë³µ ë°œìƒí•  ìˆ˜ëŠ” ìˆìœ¼ë‚˜ ëˆ„ë½ ì—†ëŠ” ì¬ì „ì†¡ì´ ê°€ëŠ¥í•´ ë©”ì‹œì§€ ì†ì‹¤ì— ëŒ€í•œ ê±±ì •ì´ ì‚¬ë¼ì§

### Kafkaì—ì„œ íŒŒí‹°ì…”ë‹ì´ë€?
~~~
í° ë°ì´í„° ìŠ¤íŠ¸ë¦¼ì„ ì‘ì€ ë‹¨ìœ„ë¡œ ë‚˜ëˆ„ëŠ” ê³¼ì •
~~~
ê° íŒŒí‹°ì…˜ë“¤ì„ ë‹¤ë¥¸ íŒŒí‹°ì…˜ë“¤ê³¼ ê´€ê³„ ì—†ì´ ì²˜ë¦¬í•  ìˆ˜ ìˆì–´ ìˆ˜í‰ í™•ì¥ì´ ê°€ëŠ¥í•´ì§
### ìì—°ìŠ¤ëŸ¬ìš´ ë°±í”„ë ˆì…” í•¸ë“¤ë§ (Natural Backpressure Handling)ì´ë€?
~~~
ë°±í”„ë ˆì…”ë€?
ì‹œìŠ¤í…œì˜ ì²˜ë¦¬ ìš©ëŸ‰ì„ ì´ˆê³¼í•˜ëŠ” ë°ì´í„°ê°€ ìœ ì…ë  ë•Œ ë°œìƒí•˜ëŠ” í˜„ìƒ
~~~
ì¹´í”„ì¹´ì˜ ClientëŠ” pull ë°©ì‹ì„ ì‚¬ìš©. ìê¸° ìì‹ ì˜ ì†ë„ë¡œ ë°ì´í„°ë¥¼ ì²˜ë¦¬í•  ìˆ˜ ìˆì–´ ì„±ëŠ¥ê³¼ í¸ë¦¬í•¨ì— ì§‘ì¤‘í•  ìˆ˜ ìˆìŒ ğŸƒâ€ğŸ’¨

### Kafkaì—ì„œ **ë¡œê·¸ì»´íŒ©ì…˜**(log compaction)ì´ë€?
íŠ¹ì • í† í”½ì˜ ë¡œê·¸ íŒŒì¼ í¬ê¸°ë¥¼ ê´€ë¦¬í•˜ê¸° ìœ„í•œ ë©”ì»¤ë‹ˆì¦˜
ë¡œê·¸ ì»´íŒ©ì…˜ ê¸°ëŠ¥ì„ í†µí•´ ìŠ¤ëƒ…ìƒ· ì—­í• ì´ ê°€ëŠ¥í•´ì¡ŒìŒ. ëª¨ë‹ˆí„°ë§ì„ í†µí•´ ì§€ì—°ì— ëŒ€í•œ ë¬¸ì œë¥¼ ë¹ ë¥´ê²Œ í•´ê²°í•  ìˆ˜ ìˆê²Œë¨

### ì¹´í”„ì¹´ëŠ” BPSì™€ ìƒê´€ì—†ì´ ì§€ì—°ì´ ê±°ì˜ ë°œìƒí•˜ì§€ ì•ŠìŒ
-> ì´ë²¤íŠ¸ë²„ìŠ¤ëŠ” ì„œë¹™ ë ˆì´ì–´ì™€ ìŠ¤í† ë¦¬ì§€ ë ˆì´ì–´ê°€ ë¶„ë¦¬ë˜ì–´ ìˆì–´ ì¶”ê°€ì ì¸ í™‰ì´ í•„ìš”í•˜ì§€ë§Œ ì¹´í”„ì¹´ëŠ” í•˜ë‚˜ì˜ í”„ë¡œì„¸ìŠ¤ì—ì„œ ìŠ¤í† ë¦¬ì§€ì™€ ìš”ì²­ì„ ëª¨ë‘ì²˜ë¦¬í•˜ê¸° ë•Œë¬¸
![bps](https://raw.githubusercontent.com/mash-up-kr/S3A/master/14th_kafka/junhyoung/image/ch1/bps.png)


### 1.3 ì¹´í”„ì¹´ì˜ ì£¼ìš” íŠ¹ì§•

![throughput](https://raw.githubusercontent.com/mash-up-kr/S3A/master/14th_kafka/junhyoung/image/ch1/throughput.png)

ë†’ì€ ì²˜ë¦¬ëŸ‰ê³¼ ë‚®ì€ ì§€ì—° ì‹œê°„
ë†’ì€ í™•ì¥ì„±
ê³ ê°€ìš©ì„±
ë‚´êµ¬ì„±
ê°œë°œ í¸ì˜ì„±
ìš´ì˜ ë° ê´€ë¦¬ í¸ì˜ì„±

### 1.4 ì¹´í”„ì¹´ì˜ ì„±ì¥
![growthOfKafka.png](https://raw.githubusercontent.com/mash-up-kr/S3A/master/14th_kafka/junhyoung/image/ch1/growthOfKafka.png)

- ë¦¬í”Œë¦¬ì¼€ì´ì…˜ ê¸°ëŠ¥ ì¶”ê°€(v0.8)
- ìŠ¤í‚¤ë§ˆ ë ˆì§€ìŠ¤íŠ¸ë¦¬ ê³µê°œ(v0.8.2)
- ì¹´í”„ì¹´ ì»¤ë„¥íŠ¸ ê³µê°œ(v0.9)
- ì¹´í”„ì¹´ ìŠ¤íŠ¸ë¦¼ì¦ˆ ê³µê°œ(v0.10)
- KSQL ê³µê°œ
- ì£¼í‚¤í¼ ì˜ì¡´ì„±ì—ì„œ í•´ë°©(v3.0)

### 1.5 ë‹¤ì–‘í•œ ì¹´í”„ì¹´ì˜ ì‚¬ìš© ì‚¬ë¡€
#### ë°ì´í„° íŒŒì´í”„ë¼ì¸: ë„·í”Œë¦­ìŠ¤ ì‚¬ë¡€
![Netflix Architecture](https://raw.githubusercontent.com/mash-up-kr/S3A/master/14th_kafka/junhyoung/image/ch1/netflix.png)

#### ë°ì´í„° í†µí•©: ìš°ë²„ ì‚¬ë¡€
![Uber Architecture](https://raw.githubusercontent.com/mash-up-kr/S3A/master/14th_kafka/junhyoung/image/ch1/uber.png)











