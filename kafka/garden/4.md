4장에서는 카프카의 토픽으로 메시지를 보내는 역할을 하는 프로듀서의 동작 방식, 옵션 등을 살펴본다.

키 값을 정해 해당 키를 가진 모든 메시지를 동일 파티션을 전송 가능, 키 값이 없다면 라운드 로빈.

자바 카프카 프로듀서로 메세지를 보내면 future 객체를 리턴하는데 이거 기다렸다가 성공 했는지 실패했는지 확인 할 수도 있고 그냥 보내기만 할 수(손실가능성있음)도 있다.

프로듀서 주요 옵션
- bootstrap.servers: 카프카 클러스터에 처음 연결하기 위한 호스트와 포트 정보로 구성된 리스트 정보
- acks: 프로듀서가 토픽 리더에게 메시지를 보낸 후 요청을 완료하기 전 ack 수. 수가 작으면 성능이 좋지만 메시지 손실 가능성도 있다.
- buffer.memory: 프로듀서가 카프카 서버로 데이터를 보내기 위해 잠시 대기할 수 있는 메모리 바이트
- compression.type: 어떤 타입으로 데이터를 압축해서 보낼지?
- retries: 실패한 데이터를 다시 보내는 횟수
- batch.size: 같은 파이션으로 보내는 여러 데이터를 배치 처리하는데 이 크기임
- linger.ms: 배치 메시지 보내기 전 추가적인 메시지들을 위해 기다리는 시간 (이 시간동안 메시지 안오면 걍 보내버림)

메시지 전송 방법
- 손실 가능성이 높지만 빠른 전송
	- ack 0
- 손실 가능성이 적고 적당한 속도의 전송
	- ack1 (리더가  받자마자 ack 보내고 장애나면 손실)
- 전송 속도는 느리지만 메시지 손실이 없어야 하는 경우
	- ack all  하고 min.insync.replicas 도 조절 해야함 (중요)